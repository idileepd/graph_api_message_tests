<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chill</title>
  </head>
  <script
    type="text/javascript"
    src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"
  ></script>

  <body>
    <p>cool bro</p>
  </body>

  <script>
    // const html =
    //   '<html style="padding:0; margin:0; font-family:&quot;Segoe UI&quot;,&quot;Segoe WP&quot;,&quot;Segoe&quot;,Tahoma,Frutiger,&quot;Frutiger Linotype&quot;,&quot;Dejavu Sans&quot;,&quot;Helvetica Neue&quot;,Arial,sans-serif"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta content="IE=edge"><meta name="description" content=""><meta name="viewport" content="width=device-width, initial-scale=1"></head><body style="padding:0; margin:0; font-family:&quot;Segoe UI&quot;,&quot;Segoe WP&quot;,&quot;Segoe&quot;,Tahoma,Frutiger,&quot;Frutiger Linotype&quot;,&quot;Dejavu Sans&quot;,&quot;Helvetica Neue&quot;,Arial,sans-serif"><style>\x3C!--:root, html, body{padding:0;margin:0;font-family:"Segoe UI","Segoe WP","Segoe",Tahoma,Frutiger,"Frutiger Linotype","Dejavu Sans","Helvetica Neue",Arial,sans-serif}table{border-collapse:collapse}td{padding:0;border-collapse:collapse}.hello{text-align:left}.hello h1{font-size:24px;line-height:24px;color:#0B7ED9;margin:0;padding:0;font-family:"Segoe UI","Segoe WP","Segoe",Tahoma,Frutiger,"Frutiger Linotype","Dejavu Sans","Helvetica Neue",Arial,sans-serif;font-weight:300}.weather-location{text-align:right;line-height:9px}.weather{font-size:10px!important;line-height:9px;text-align:right}.weather p{font-size:10px!important;line-height:12px!important;color:#7f7f7f;margin:0;text-align:right}.weather p span{font-weight:bold;font-size:10px!important}.location img{margin:0 0 0 10px}.title h2{font-size:14px;line-height:14px;color:#333333;margin:30px 0 20px 0;padding:0;font-family:"Segoe UI","Segoe WP","Segoe",Tahoma,Frutiger,"Frutiger Linotype","Dejavu Sans","Helvetica Neue",Arial,sans-serif;font-weight:600}.event-list{width:100%}.event-list td{padding:0 0 5px 0}.event-date p{color:#333;font-size:13px;line-height:17px;margin:3px 0 0 0;font-family:"Segoe UI","Segoe WP","Segoe",Tahoma,Frutiger,"Frutiger Linotype","Dejavu Sans","Helvetica Neue",Arial,sans-serif}.event-date p span{color:#666}.event-content p{margin:3px 0 20px 0;color:#333;font-size:13px;line-height:19px}.smallstop .event-content p{margin:1px 0 20px 0}.event-content p span{color:#666}.event-list tbody tr:last-child .event-content{padding:0 0 30px 0}.event-list tbody:last-child tr:last-child .event-busstop{background:none}.event-list tbody tr:last-child{padding:0 0 20px 0}.keys{text-align:center}.keys td p{margin:0;padding:0}.keys td span{font-size:13px;line-height:20px;font-weight:600;vertical-align:top;margin:0 10px}.tasks{border-top:1px solid #eaeaea}.tasks h3{font-size:14px;line-height:14px;color:#0B7ED9;margin:25px 0 15px 0;padding:0;font-family:"Segoe UI","Segoe WP",Tahoma,Frutiger,"Frutiger Linotype","Dejavu Sans","Helvetica Neue",Arial,sans-serif;font-weight:600}.tasks ul{list-style:none;padding:0;margin:0}.tasks ul{margin:0 0 10px 0}.tasks ul li{font-size:13px;line-height:19px}.tasks ul li.complete{text-decoration:line-through;color:#666}.tasks span{color:#999;font-size:13px;line-height:13px;display:inline-block}.tasks span a, .tasks span a:visited{color:#999;text-decoration:none}.tasks span a:hover{color:#000}.footer{border-top:1px solid #eaeaea;text-align:center;color:#7b7b7b;margin:0 0 15px 0}.footer p{font-size:12px;line-height:15px;margin:25px 0 0 0}.footer a, .footer a:visited{color:#7b7b7b}.footer a:hover{color:#adadad}.footer p span{color:#adadad}@media screen and (max-width: 800px) {}.circle{border-radius:50%;z-index:2;margin:auto}.circle_small{width:8px;height:8px}--></style><table width="100%" bgcolor="#ffffff" align="left" style="border-collapse:collapse"><tbody><tr><td style="padding:8px 0 0 0px; border-collapse:collapse"><table cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff" style="border-collapse:collapse"><tbody><tr><td colspan="3" height="40" style="padding:0; border-collapse:collapse">&nbsp;</td></tr><tr><td style="padding:10px; border-collapse:collapse">&nbsp;</td><td width="440" style="padding:0; border-collapse:collapse"><table cellpadding="0" cellspacing="0" border="0" width="100%" style="border-collapse:collapse"><tbody><tr><td class="hello" style="padding:0; border-collapse:collapse; text-align:left"><h1 style="font-size:21px; line-height:28px; color:#212121; margin:10px 0 0 0; padding:0; font-family:&quot;Segoe UI&quot;,&quot;Segoe WP&quot;,&quot;Segoe&quot;,Tahoma,Frutiger,&quot;Frutiger Linotype&quot;,&quot;Dejavu Sans&quot;,&quot;Helvetica Neue&quot;,Arial,sans-serif; font-weight:300">Hello Dileep Nagendra,</h1></td></tr></tbody></table><table cellpadding="0" cellspacing="0" border="0" width="100%" class="title" style="border-collapse:collapse"><tbody><tr><td width="100%" style="padding:0; border-collapse:collapse"><h2 style="font-size:17px; line-height:20px; color:#333333; margin:30px 0 20px 0; padding:0; font-family:&quot;Segoe UI&quot;,&quot;Segoe WP&quot;,&quot;Segoe&quot;,Tahoma,Frutiger,&quot;Frutiger Linotype&quot;,&quot;Dejavu Sans&quot;,&quot;Helvetica Neue&quot;,Arial,sans-serif; font-weight:300">Your agenda for <span style="font-family:&quot;Segoe UI&quot;,&quot;Segoe WP&quot;,&quot;Segoe&quot;,Tahoma,Frutiger,&quot;Frutiger Linotype&quot;,&quot;Dejavu Sans&quot;,&quot;Helvetica Neue&quot;,Arial,sans-serif; font-weight:300">Monday, February 1, 2021 </span></h2></td></tr></tbody></table><table cellpadding="0" cellspacing="0" border="0" width="100%" style="border-collapse:collapse; width:100%"><tbody><tr><td width="80" valign="top" style="padding:0 0 5px 0; border-collapse:collapse"><p style="color:#333; font-size:13px; line-height:17px; margin:3px 0 0 0">Tasks</p></td><td><table cellpadding="0" cellspacing="0" border="0" width="100%" style="border-collapse:collapse; width:100%"><tbody><tr><td width="24" align="center" valign="top" style="padding:0 0 0 0; border-collapse:collapse"><img src="cid:task" width="24px" height="24px" style="border-radius:12px"> </td><td width="23" style="padding:0 0 5px 0; border-collapse:collapse">&nbsp;</td><td width="350"><p style="margin:1px 0 20px 0; color:#333; font-size:13px; line-height:19px"><a href="https://outlook.com/?viewmodel=TaskReadingPaneViewModelPopOutFactory&amp;ItemID=AQMkADAwATM3ZmYAZS0zMwA4NS04MjRjLTAwAi0wMAoARgAAA4LTyPL1jNpGqZqb61AQqykHAH4X%2byTldjpBsp7CU3P5lhwAAAImGwAAAH4X%2byTldjpBsp7CU3P5lhwAAAAxDuSUAAAA&amp;Source=AgendaMail" itemscope="" itemid="AQMkADAwATM3ZmYAZS0zMwA4NS04MjRjLTAwAi0wMAoARgAAA4LTyPL1jNpGqZqb61AQqykHAH4X_yTldjpBsp7CU3P5lhwAAAImGwAAAH4X_yTldjpBsp7CU3P5lhwAAAAxDuSUAAAA" itemtype="microsoft.graph.task" style="text-decoration:none; color:#0078D7">Documents for gate</a> </p></td></tr></tbody></table></td></tr><tr><td colspan="2" height="15px" style="padding:0; border-collapse:collapse">&nbsp; </td></tr></tbody></table><table cellpadding="0" cellspacing="0" border="0" width="100%" height="100%" class="event-list" style="border-collapse:collapse; width:100%"><tbody></tbody></table><table cellpadding="0" cellspacing="0" border="0" width="100%" class="keys" style="border-collapse:collapse; text-align:center"><tbody><tr><td height="30px" style="padding:0; border-collapse:collapse">&nbsp; </td></tr></tbody></table><table cellpadding="0" cellspacing="0" border="0" width="100%" class="footer" style="border-collapse:collapse; border-top:1px solid #eaeaea; text-align:center; color:#7b7b7b; margin:0 0 15px 0"><tbody><tr><td height="15px" style="padding:0; border-collapse:collapse">&nbsp; </td></tr><tr><td width="100%" style="padding:0; border-collapse:collapse"><a href="https://outlook.live.com/"><img src="cid:outlookLogo" width="120" height="29" style="margin:15px 0 0 10px"> </a></td></tr><tr><td width="100%" style="padding:0; border-collapse:collapse"><p style="font-size:12px; line-height:15px; margin:15px 0 0 0"><a href="https://outlook.com/calendar/options/calendar/agendaMail" style="color:#7b7b7b">Agenda mail settings</a> <br><a href="https://outlook.live.com/owa/calendar/00037ffe-3385-824c-0000-000000000000@outlook.com/agendamail/unsubscribe/41cf25af-be59-44ee-8c54-a3869c1dd0b6" style="color:#7b7b7b">Unsubscribe</a> â€¢ <a href="https://go.microsoft.com/fwlink/?LinkId=521839" style="color:#7b7b7b">Privacy statement</a> <br><span style="color:#adadad">Microsoft Corporation, One Microsoft Way, Redmond, WA 98052</span> </p></td></tr></tbody></table></td><td style="padding:10px; border-collapse:collapse">&nbsp;</td></tr><tr><td colspan="3" height="20" style="padding:0; border-collapse:collapse">&nbsp;</td></tr></tbody></table></td></tr></tbody></table></body></html>';
    // // html2canvas();
    // const parser = new DOMParser();
    // const doc = parser.parseFromString(h, "text/html");
    // console.log(doc)
    // html2canvas(doc.body).then((canvas) => {
    //   var img = canvas.toDataURL("image/png");
    //   console.log(img);
    // });

    // // const html = "<div>Hello World!</div>";
    // const iframe = document.createElement("iframe");
    // document.body.appendChild(iframe); // ðŸ‘ˆ still required
    // iframe.contentWindow.document.open();
    // iframe.contentWindow.document.write(html);
    // iframe.contentWindow.document.close();
    // html2canvas(iframe.contentWindow.document.body).then((canvas) => {
    //   var img = canvas.toDataURL("image/png");
    //   console.log(img);
    // });

    // const placeholder = document.createElement("div");
    // placeholder.insertAdjacentHTML("afterbegin", html);
    // const node = placeholder.firstElementChild;

    // const node = document.createRange()
    // .createContextualFragment(html);

    // html2canvas(node.).then((canvas) => {
    //   var img = canvas.toDataURL("image/png");
    //   console.log(img);
    // });
    https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString

    const ctx = document.querySelector("canvas").getContext("2d");
    const html = `
<p>this
<p>is <span style="color:red; font-weight: bold;">not</span>
<p><i>xml</i>!
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABWElEQVQ4jZ2Tu07DQBBFz9jjvEAQqAlQ0CHxERQ0/AItBV9Ew8dQUNBQIho6qCFE4Nhex4u85OHdWAKxzfWsx0d3HpazdGITA4kROjl0ckFrnYJmQlJrKsQZxFOIMyEqIMpADGhSZpikB1hAGsovdxABGuepC/4L0U7xRTG/riG3J8fuvdifPKnmasXp5c2TB1HNPl24gNTnpeqsgmj1eFgayoHvRDWbLBOKJbn9WLGYflCCpmM/2a4Au6/PTjdH+z9lCJQ9vyeq0w/ve2kA3vaOnI6k4Pz+0Y24yP3Gapy+Bw6qdfsCRZfWSWgclCCVXTZu5LZFXKJJ2sepW2KYNCENB3U5pw93zLoDjNK6E7rTFcgbkGYJtiLckxCiw4W1OURsxUE5BokQiQj3JIToVtKwlhsurq+YDYbMBjuU/W3KtT3xIbrpAD7E60lwQohuaMtP8ldI0uMbGfC1r1zyWPUAAAAASUVORK5CYII=">`;
    render_html_to_canvas(html, ctx, 0, 0, 300, 150);

    function render_html_to_canvas(html, ctx, x, y, width, height) {
      var data =
        "data:image/svg+xml;charset=utf-8," +
        '<svg xmlns="http://www.w3.org/2000/svg" width="' +
        width +
        '" height="' +
        height +
        '">' +
        '<foreignObject width="100%" height="100%">' +
        html_to_xml(html) +
        "</foreignObject>" +
        "</svg>";

      var img = new Image();
      img.onload = function () {
        ctx.drawImage(img, x, y);
      };
      img.src = data;
      console.log(data)
    }
  </script>
</html>
